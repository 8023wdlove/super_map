import{a as j}from"./chunk-IYYYRDFO.js";import"./chunk-QK4WXGAD.js";import"./chunk-XJVZABJP.js";import"./chunk-W3WRSDQH.js";import"./chunk-VETUMSV6.js";import"./chunk-OGTTQ4KL.js";import"./chunk-7AR5UXG3.js";import{a as Y}from"./chunk-XKBSMKNP.js";import{a as M}from"./chunk-J4ID4JKR.js";import{d as J,g as B,n as U,o as D}from"./chunk-K2IDXOCV.js";import"./chunk-NPAFDOYL.js";import"./chunk-45OWWDV7.js";import{a as T}from"./chunk-JX5O4HI2.js";import"./chunk-6S43R6PL.js";import"./chunk-TW5GUTQO.js";import"./chunk-ZRLECQ27.js";import"./chunk-FEOWMVRK.js";import{a as v}from"./chunk-CUQT2UK5.js";import"./chunk-CB3KB2D3.js";import{a as l}from"./chunk-I46SWINN.js";import{a as N}from"./chunk-LNIYJJXS.js";import{a as g}from"./chunk-4D2ERGZX.js";import"./chunk-EDZQSM3T.js";import{a as y}from"./chunk-PJGSCWXZ.js";import{a as u}from"./chunk-NUC3LT2W.js";import"./chunk-SFC4FDPW.js";var z=new l,C=new l;function W(i){i=g(i,g.EMPTY_OBJECT);var e=i.positions,t=i.maximumHeights,r=i.minimumHeights;if(!u(e))throw new y("options.positions is required.");if(u(t)&&t.length!==e.length)throw new y("options.positions and options.maximumHeights must have the same length.");if(u(r)&&r.length!==e.length)throw new y("options.positions and options.minimumHeights must have the same length.");var a=g(i.granularity,N.RADIANS_PER_DEGREE),h=g(i.ellipsoid,v.WGS84);this._positions=e,this._minimumHeights=r,this._maximumHeights=t,this._granularity=a,this._ellipsoid=v.clone(h),this._workerName="createWallOutlineGeometry",this._outlineWidth=g(i.outlineWidth,1);var o=1+e.length*l.packedLength+2;u(r)&&(o+=r.length),u(t)&&(o+=t.length),this.packedLength=o+v.packedLength+2}W.pack=function(i,e,t){if(!u(i))throw new y("value is required");if(!u(e))throw new y("array is required");t=g(t,0);var r,a=i._positions,h=a.length;for(e[t++]=h,r=0;r<h;++r,t+=l.packedLength)l.pack(a[r],e,t);var o=i._minimumHeights;if(h=u(o)?o.length:0,e[t++]=h,u(o))for(r=0;r<h;++r)e[t++]=o[r];var f=i._maximumHeights;if(h=u(f)?f.length:0,e[t++]=h,u(f))for(r=0;r<h;++r)e[t++]=f[r];return v.pack(i._ellipsoid,e,t),t+=v.packedLength,e[t++]=i._granularity,e[t]=i._outlineWidth,e};var K=v.clone(v.UNIT_SPHERE),b={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:K,granularity:void 0,outlineWidth:void 0};W.unpack=function(i,e,t){if(!u(i))throw new y("array is required");e=g(e,0);var r,a=i[e++],h=new Array(a);for(r=0;r<a;++r,e+=l.packedLength)h[r]=l.unpack(i,e);a=i[e++];var o;if(a>0)for(o=new Array(a),r=0;r<a;++r)o[r]=i[e++];a=i[e++];var f;if(a>0)for(f=new Array(a),r=0;r<a;++r)f[r]=i[e++];var d=v.unpack(i,e,K);e+=v.packedLength;var s=i[e++],p=i[e];return u(t)?(t._positions=h,t._minimumHeights=o,t._maximumHeights=f,t._ellipsoid=v.clone(d,t._ellipsoid),t._granularity=s,t._outlineWidth=p,t):(b.positions=h,b.minimumHeights=o,b.maximumHeights=f,b.granularity=s,b.outlineWidth=p,new W(b))};W.fromConstantHeights=function(i){i=g(i,g.EMPTY_OBJECT);var e=i.positions;if(!u(e))throw new y("options.positions is required.");var t,r,a=i.minimumHeight,h=i.maximumHeight,o=u(a),f=u(h);if(o||f){var d=e.length;t=o?new Array(d):void 0,r=f?new Array(d):void 0;for(var s=0;s<d;++s)o&&(t[s]=a),f&&(r[s]=h)}var p={positions:e,maximumHeights:r,minimumHeights:t,ellipsoid:i.ellipsoid};return new W(p)};W.createGeometry=function(i){var e=i._positions,t=i._minimumHeights,r=i._maximumHeights,a=i._granularity,h=i._ellipsoid,o=j.computePositions(h,e,r,t,a,!1);if(!!u(o)){var f=o.pos.bottomPositions,d=o.pos.topPositions,s=d.length;if(i._outlineWidth>1){let G=s/3;var p=((G*2-2)*2+1)*3,m=new Float64Array(p),n=0;s=G;let H,P,A;for(H=0;H<s;++H){var E=H*3;P=l.fromArray(d,E,z),A=l.fromArray(f,E,C),H!==0&&(m[n++]=P.x,m[n++]=P.y,m[n++]=P.z),m[n++]=A.x,m[n++]=A.y,m[n++]=A.z,m[n++]=P.x,m[n++]=P.y,m[n++]=P.z}for(n-=3,H=s-2;H>=0;--H){var E=H*3;A=l.fromArray(f,E,C),m[n++]=A.x,m[n++]=A.y,m[n++]=A.z}}else{var p=s*2,m=new Float64Array(p),n=0;s/=3;var c;for(c=0;c<s;++c){var E=c*3,L=l.fromArray(d,E,z),S=l.fromArray(f,E,C);m[n++]=S.x,m[n++]=S.y,m[n++]=S.z,m[n++]=L.x,m[n++]=L.y,m[n++]=L.z}var O=new M({position:new D({componentDatatype:T.DOUBLE,componentsPerAttribute:3,values:m})})}var O=new M({position:new D({componentDatatype:T.DOUBLE,componentsPerAttribute:3,values:m})});i._outlineWidth>1&&(O.sideness=new D({componentDatatype:T.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,0,1,1,1,1,0])}),O.sideness.isInstanceAttribute=!0);var k=p/3;p=2*k-4+k;var _=Y.createTypedArray(k,p),w=0;for(c=0;c<k-2;c+=2){var q=c,R=c+2,Q=l.fromArray(m,q*3,z),X=l.fromArray(m,R*3,C);if(!l.equalsEpsilon(Q,X,N.EPSILON10)){var V=c+1,Z=c+3;_[w++]=V,_[w++]=q,_[w++]=V,_[w++]=Z,_[w++]=q,_[w++]=R}}return _[w++]=k-2,_[w++]=k-1,new U({attributes:O,indices:_,primitiveType:i._outlineWidth>1?B.TRIANGLES:B.LINES,boundingSphere:new J.fromVertices(m)})}};var F=W;function $(i,e){return u(e)&&(i=F.unpack(i,e)),i._ellipsoid=v.clone(i._ellipsoid),F.createGeometry(i)}var gi=$;export{gi as default};
